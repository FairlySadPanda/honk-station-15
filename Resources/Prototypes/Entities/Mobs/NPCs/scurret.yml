# Defines the scurret, a small, agile sapient species intended for players who want to play as something similar to an ewok.
# Although based on MobBaseAncestor, this species does not have a "developed" playable species it is an ancestor to.

- type: entity
  name: scurret
  id: MobBaseScurret
  parent: MobBaseAncestor
  abstract: true
  components:
  # Custom names
  - type: ReplacementAccent
    accent: scurret
  - type: Sprite
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      sprite: Mobs/Animals/scurret/scurret.rsi
      state: scurret
    - map: [ "enum.HumanoidVisualLayers.Handcuffs" ]
      color: "#ffffff"
      sprite: Objects/Misc/handcuffs.rsi
      state: body-overlay-2
      visible: false
  # Custom visuals for dead scurrets; be aware these do not work well with equipment.
  - type: DamageStateVisuals
    states:
      Alive:
        Base: scurret
      Critical:
        Base: scurret_oof
      Dead:
        Base: scurret_rip
  #  About as tough as a monkey
  - type: MobThresholds
    thresholds:
      0: Alive
      60: Critical
      125: Dead
  - type: Temperature
    heatDamageThreshold: 360
    coldDamageThreshold: 285
    currentTemperature: 310.15
    specificHeat: 42
  # Good eatin', you monster.
  - type: Butcherable
    butcheringType: Spike
    spawned:
    - id: FoodMeat
      amount: 4
  # They wawa!
  - type: Vocal
    sounds:
      Male: Scurret
      Female: Scurret
      Unsexed: Scurret
    wilhelmProbability: 0.01 # the scug, it screams like a man
  - type: Speech
    speechVerb: Wawa
    speechSounds: Wawa
    allowedEmotes: ['Thump'] # They're 80% tail
  - type: TypingIndicator
    proto: moth
  - type: InteractionPopup
    successChance: 0.99 # Imagine not being allowed to headpat a scurret, chat
    interactSuccessString: petting-success-scurret
    interactFailureString: petting-failure-scurret
    interactSuccessSpawn: EffectHearts
    interactSuccessSound:
      path: /Audio/Animals/wawa_chillin.ogg
    interactFailureSound:
      path: /Audio/Animals/wawa_chatter.ogg
  # They nyoom
  - type: MovementSpeedModifier
    baseWalkSpeed: 5 # nyoom
    baseSprintSpeed: 7 # NYOOOOOM
  - type: MeleeWeapon
    soundHit:
      path: /Audio/Effects/bite.ogg
    angle: 30
    animation: WeaponArcBite
    damage:
      types:
        Piercing: 10 # NOM
  - type: Inventory
    speciesId: scurret
    templateId: scurret
    displacements:
      jumpsuit:
        sizeMaps:
          32:
            sprite: Mobs/Animals/scurret/displacement.rsi
            state: jumpsuit
      id:
        sizeMaps:
          32:
            sprite: Mobs/Animals/scurret/displacement.rsi
            state: id
      gloves:
        sizeMaps:
          32:
            sprite: Mobs/Animals/scurret/displacement.rsi
            state: gloves
      neck:
        sizeMaps:
          32:
            sprite: Mobs/Animals/scurret/displacement.rsi
            state: neck
  - type: InventorySlots
  - type: Food
  - type: Hunger
    baseDecayRate: 0.05 # They get a lil' hungy
  - type: BodyEmotes # Grants them clapping and so on.
    soundsId: GeneralBodyEmotes
  - type: Tag
    tags:
      - DoorBumpOpener
      - FootstepSound
      - CanPilot # Inexplicably, scurrets have a natural aptitude for spaceflight TODO: FIX THIS AS IT DOESN'T WORK YET :<

- type: inventoryTemplate
  id: scurret
  slots:
  - name: ears
    slotTexture: ears
    slotFlags: EARS
    stripTime: 3
    uiWindowPos: 0,2
    strippingWindowPos: 1,2
    displayName: Ears
  - name: gloves
    slotTexture: gloves
    slotFlags: GLOVES
    uiWindowPos: 0,1
    strippingWindowPos: 2,2
    displayName: Gloves
  - name: head
    slotTexture: head
    slotFlags: HEAD
    uiWindowPos: 1,3
    strippingWindowPos: 0,0
    displayName: Head
  - name: mask
    slotTexture: mask
    slotFlags: MASK
    uiWindowPos: 1,2
    strippingWindowPos: 1,1
    displayName: Mask
  - name: neck
    slotTexture: neck
    slotFlags: NECK
    uiWindowPos: 1,1
    strippingWindowPos: 0,1
    displayName: Neck
  - name: jumpsuit
    slotTexture: uniform
    slotFlags: INNERCLOTHING
    stripTime: 6
    uiWindowPos: 1,0
    strippingWindowPos: 0,2
    displayName: Jumpsuit
  - name: id
    slotTexture: id
    fullTextureName: template_small
    slotFlags: IDCARD
    slotGroup: SecondHotbar
    stripTime: 6
    uiWindowPos: 2,1
    strippingWindowPos: 2,4
    dependsOn: jumpsuit
    displayName: ID
  - name: suitstorage
    slotTexture: suit_storage
    slotFlags:   SUITSTORAGE
    slotGroup: MainHotbar
    stripTime: 3
    uiWindowPos: 2,0
    strippingWindowPos: 2,5
    dependsOn: jumpsuit
    dependsOnComponents:
    - type: AllowSuitStorage
    displayName: Suit Storage

- type: speechSounds
  id: Wawa
  saySound:
    path: /Audio/Animals/wawa_statement.ogg
  askSound:
    path: /Audio/Animals/wawa_question.ogg
  exclaimSound:
    path: /Audio/Animals/wawa_exclaim.ogg

- type: accent
  id: scurret
  fullReplacements:
  - accent-words-scurret-1
  - accent-words-scurret-2
  - accent-words-scurret-3
  - accent-words-scurret-4
  - accent-words-scurret-5
  - accent-words-scurret-6
  - accent-words-scurret-7
  - accent-words-scurret-8

- type: emoteSounds
  id: Scurret
  params:
    variation: 0.125
  sounds:
    Laugh:
      collection: WawaLaugh
    Sneeze:
      collection: WawaSneeze
    Cough:
      collection: MaleCoughs
    Whistle:
      collection: Whistles
    Sigh:
      collection: WawaSigh
    Scream:
      collection: WawaScream

- type: soundCollection
  id: WawaLaugh
  files:
  - /Audio/Animals/wawa_mock.ogg

- type: soundCollection
  id: WawaSneeze
  files:
  - /Audio/Animals/wawa_achoo.ogg

- type: soundCollection
  id: WawaSigh
  files:
  - /Audio/Animals/wawa_depression.ogg

- type: soundCollection
  id: WawaScream
  files:
  - /Audio/Animals/wawa_protest.ogg

# Spawnable scurrets have a random name and colour.

- type: entity
  name: scurret
  description: Commonly known as Wawa, from the wetlands of Planet Wawa, these critters make up the bulk of Arnolds' Pizza's "loyal workforce".
  id: MobScurret
  parent: MobBaseScurret
  components:
  # The have a rich culture
  - type: RandomMetadata
    nameSegments:
      - NamesFirstScurret
      - NamesLastScurret
    nameFormat: name-format-standard
  # They come in a variety of colours
  - type: RandomSprite
    available:
    - enum.DamageStateVisualLayers.Base:
        scurret: ScurretColors

- type: palette
  id: ScurretColors
  name: ScurretColors
  colors:
    Normal: "#ffffff" # Sluggy
    Innocent: "#f6f439" # Monky
    Angry: "#dc5864" # Hunty
    Perceptive: "#222222" # Watchy
    Eldritch: "#dc5864"
    Fat: "#fefcab"
    Violent: "#ab3430"
    Speedy: "#679cfe"
    Mutated: "#7824a0"
    Damned: "#98e652"

# Emotional Support Scurrets have a ghost role and equipment. At the moment, these are intended to be used for admemes, but
# feel free to hook them into random content.

- type: entity
  name: Emotional Support Scurret
  id: MobBaseEmotionalSupportScurret
  parent: MobBaseScurret
  abstract: true
  components:
    - type: Loadout
      prototypes: [ EmotionalSupportScurretGear ]
    - type: NpcFactionMember
      factions:
      - Passive
    - type: GhostRole
      makeSentient: true
      name: ghost-role-information-emotional-support-scurret-name
      description: ghost-role-information-emotional-support-scurret-description
      rules: ghost-role-information-nonantagonist-rules
      raffle:
        settings: default
    - type: GhostTakeoverAvailable

# Spawnable ESS have a ghost role, equipment, a random name and a random colour.

- type: entity
  name: Emotional Support Scurret
  id: MobEmotionalSupportScurret
  parent: [MobScurret, MobBaseEmotionalSupportScurret]
  description: Commonly known as Wawa, from the wetlands of Planet Wawa, these critters make up the bulk of Arnolds's Pizza's "loyal workforce". This one is here as a temp.
